"use strict";(self.webpackChunkdeveloper_playcanvas_com=self.webpackChunkdeveloper_playcanvas_com||[]).push([[1042],{98424:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>r,toc:()=>l});var i=n(85893),a=n(11151);const s={title:"Anim Events",sidebar_position:5},o=void 0,r={id:"user-manual/animation/anim-events",title:"Anim Events",description:"Anim events can be used to trigger event listeners during the playback of an animation. Each event is associated with a specified frame of the animation asset it is attached to. When the playback of the animation reaches that frame, the event will fire and the associated event listener is called.",source:"@site/docs/user-manual/animation/anim-events.md",sourceDirName:"user-manual/animation",slug:"/user-manual/animation/anim-events",permalink:"/user-manual/animation/anim-events",draft:!1,unlisted:!1,editUrl:"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/user-manual/animation/anim-events.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Anim Events",sidebar_position:5},sidebar:"userManualSidebar",previous:{title:"Anim Layer Masks",permalink:"/user-manual/animation/anim-layer-masking"},next:{title:"Physics",permalink:"/user-manual/physics/"}},c={},l=[{value:"Creating Events",id:"creating-events",level:3},{value:"Event Listeners",id:"event-listeners",level:3}];function d(e){const t={code:"code",h3:"h3",img:"img",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Anim events can be used to trigger event listeners during the playback of an animation. Each event is associated with a specified frame of the animation asset it is attached to. When the playback of the animation reaches that frame, the event will fire and the associated event listener is called."}),"\n",(0,i.jsx)(t.h3,{id:"creating-events",children:"Creating Events"}),"\n",(0,i.jsxs)(t.p,{children:["To create a new event, select the animation asset in the asset panel which you'd like to create an event for. You should then see the ",(0,i.jsx)(t.code,{children:"+ EVENT"})," button in the asset inspector as shown below:"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"/images/user-manual/anim/animation_asset_with_events.png",alt:"Animation Asset With Event"})}),"\n",(0,i.jsx)(t.p,{children:"Each event has the following modifiable properties:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Variable"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"time"}),(0,i.jsx)(t.td,{children:"Defines the specific time during the playback of the animation when the event should trigger. Given in seconds."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"name"}),(0,i.jsx)(t.td,{children:"The name of the event is used to identify the event when attaching an event listener to the anim component."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"number"}),(0,i.jsx)(t.td,{children:"An additional property which can be set to any number. Used to pass additional details to the event listener."})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"string"}),(0,i.jsx)(t.td,{children:"An additional property which can be set to any string. Used to pass additional details to the event listener."})]})]})]}),"\n",(0,i.jsx)(t.h3,{id:"event-listeners",children:"Event Listeners"}),"\n",(0,i.jsx)(t.p,{children:"After creating an event for an animation asset, the event will be fired whenever that asset is played back by an anim component. You can therefore attach listeners to the anim component to handle the event. The following example shows how to attach event listeners to the anim component:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"var AnimationEvents = pc.createScript('animationEvents');\n\n// initialize code called once per entity\nAnimationEvents.prototype.initialize = function() {\n    this.entity.anim.on('plant_foot', function (event) {\n        // get the foot bone from the event's string property, either right_foot or left_foot\n        const footBone = this.entity.findByName(event.string);\n        createDustCloudAtLocation(footBone.getPosition());\n    }, this);\n};\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Any number of animation events can be attached to a single animation asset and used by any number of anim components. Making use of the additional ",(0,i.jsx)(t.code,{children:"number"})," and ",(0,i.jsx)(t.code,{children:"string"})," properties of an event allows you to differentiate between events that are passed to the same event listener."]})]})}function h(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},11151:(e,t,n)=>{n.d(t,{Z:()=>r,a:()=>o});var i=n(67294);const a={},s=i.createContext(a);function o(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);